<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>jQuery Mobile Web App</title>
<link href="css/jquery1.0a3.css" rel="stylesheet" type="text/css"/>

<script src="js/jquery1.5.js" type="text/javascript"></script>
<script src="js/jquery_edit_v1.0.js" type="text/javascript"></script>

<script>
    //AJAX호출
    $(document).ready(function () {   // 자동으로 실행되는 부분
        $("#callData").click(function() {
            alert("111");
        });


        //화면이동 효과
        //좌우 이동
        //foo
        $("#page1 .page-moving").bind("swipeleft",function(){
            $.mobile.changePage("#page2","slide");
            initialize();
        });

        //bar
        $("#page2 .page-moving").bind("swipeleft",function(){
            $.mobile.changePage("#page3","slide");
        });
        $("#page2 .page-moving").bind("swiperight",function(){
            $.mobile.changePage("#page1","slide","reverse");
        });

        //koo
        $("#page3 .page-moving").bind("swiperight",function(){
            $.mobile.changePage("#page2","slide","reverse");
            initialize();
        });


        //상하 이동
        //foo
        $("#page1 .page-moving").bind("swipeup",function(){
            $.mobile.changePage("#page2","slideup");
            initialize();
        });

        //bar
        $("#page2 .page-moving").bind("swipeup",function(){
            $.mobile.changePage("#page3","slideup");
        });
        $("#page2 .page-moving").bind("swipedown",function(){
            $.mobile.changePage("#page1","slidedown");
        });

        //koo
        $("#page3 .page-moving").bind("swipedown",function(){
            $.mobile.changePage("#page2","slidedown");
            initialize();
        });

        var windowHeight = window.innerWidth;
        $("#map").css("height",windowHeight);

         FB.checkLoginState();
     });

    // This is called with the results from from FB.getLoginStatus().
    function statusChangeCallback(response) {
        console.log('statusChangeCallback');
        console.log(response);
        // The response object is returned with a status field that lets the
        // app know the current login status of the person.
        // Full docs on the response object can be found in the documentation
        // for FB.getLoginStatus().
        if (response.status === 'connected') {
          // Logged into your app and Facebook.
          alert("접속한 상태");
          testAPI();
        } else if (response.status === 'not_authorized') {
          // The person is logged into Facebook, but not your app.
          document.getElementById('status').innerHTML = 'Please log ' +
            'into this app.';
          alert("인증안됨");
        } else {
          // The person is not logged into Facebook, so we're not sure if
          // they are logged into this app or not.
          document.getElementById('status').innerHTML = 'Please log ' +
            'into Facebook.';
          alert("아몰랑");
        }
    }

     // This function is called when someone finishes with the Login
     // Button.  See the onlogin handler attached to it in the sample
     // code below.
     function checkLoginState() {
        FB.getLoginStatus(function(response) {
          statusChangeCallback(response);
        });
     }

      window.fbAsyncInit = function() {
          FB.init({
            appId      : '928883193907054',
            cookie     : true,  // enable cookies to allow the server to access
                                // the session
            xfbml      : true,  // parse social plugins on this page
            version    : 'v2.2' // use version 2.2
          });

          // Now that we've initialized the JavaScript SDK, we call
          // FB.getLoginStatus().  This function gets the state of the
          // person visiting this page and can return one of three states to
          // the callback you provide.  They can be:
          //
          // 1. Logged into your app ('connected')
          // 2. Logged into Facebook, but not your app ('not_authorized')
          // 3. Not logged into Facebook and can't tell if they are logged into
          //    your app or not.
          //
          // These three cases are handled in the callback function.

          FB.getLoginStatus(function(response) {
            statusChangeCallback(response);
          });
      };

      // Load the SDK asynchronously
      (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));

      // Here we run a very simple test of the Graph API after login is
      // successful.  See statusChangeCallback() for when this call is made.
      function testAPI() {
        console.log('Welcome!  Fetching your information.... ');
        FB.api('/me', function(response) {
          console.log('Successful login for: ' + response.name);
          document.getElementById('status').innerHTML =
            'Thanks for logging in, ' + response.name + '!';
      });
  }


</script>
</head>
<body>
<!-- Start of first page -->

<div data-role="page" id="page1">

    <div class="page-moving" data-role="header">
        <h1>1번</h1>
    </div><!-- /header -->

    <div role="main" class="ui-content page-moving">

        <p>I'm first in the source order so I'm shown as the page.</p>

        <p>View internal page called bar</a></p>

    </div><!-- /content -->

    <fb:login-button scope="public_profile,email" onlogin="checkLoginState();">
    </fb:login-button>

    <div id="status">
    </div>
    <div class="page-moving" data-role="footer">

        <h4>Page Footer</h4>

    </div><!-- /footer -->

</div><!-- /page -->



<!-- Start of second page -->

<div data-role="page" id="page2">

    <div class="page-moving" data-role="header">
        <h1>2번</h1>
    </div><!-- /header -->

    <div role="main" class="ui-content page-moving">

        <p>I'm first in the source order so I'm shown as the page.</p>

        <p>View internal page called bar</a></p>

    </div><!-- /content -->

    <div id="map" style="width:100%; height:400px;">

    </div>

    <script type="text/javascript">  //자바스크립트 시작***************
<!-- 여기에 자바스크립트 작성 -->

var map;
var infoWindow;
var infoOldNum


//지도 초기화 코드 입니다.
﻿function initialize() {  //함수 시작==================

  //위에 정한 지도 표시 영역을 mapDiv 변수에 활당하고 있습니다.
  var mapDiv = document.getElementById('map');

  //위에서 전역변수로 활당한 map 이라는 변수에 지도를 생성 합니다.
  //지도를 생성하는 곳의 위치는 위에서 mapDiv 변수에 활당하여 넘겨 줍니다.
  map = new google.maps.Map(mapDiv, {

//임의의 위도, 경도 값으로 중심 위치를 잡습니다.
center: new google.maps.LatLng(37.5544, 126.9699),

//zoom 값이 작으면 축소된 지도 크면 확대된 지도가 보입니다.
zoom: 16,

//지도의 타입을 로드맵 형태로 잡았습니다.
mapTypeId: google.maps.MapTypeId.ROADMAP
});



//지도를 초기화 하고 아래에서 정의한 마커 표시 함수를 실행하여 마커를 표시 한다.
//dispMarks();



}






//마커를 지도에 표시 한다.
//---------------------------------------------------------------------
//캠핑장 아이콘을 표시 한다.

//각 캠핑장의 위치를 배열에 넣어서 지도에 표시 할 수 있도록 합니다.
//위도, 경도를 배열에 저장한다.
var latarray = new Array("37.4419", "37.4519", "37.4719");
var longarray = new Array("122.1419", "122.1419", "122.1419");

function dispMarks(){

       //마커를 클릭할 경우 말풍선을 표시 할 수 있도록 하는 변수를 선언한다.
    infoWindow = new google.maps.InfoWindow();


   for(var c = 0; c < 3; c++){
         //아래에서 정의한 마커생성 함수를 마커 갯수만큼 돌리면서 마커를 만든다.
       createMarker(map, c);
   }

}

//마커 생성하고 표시 하기
//---------------------------------------------------------------------

//생성된 마커를 저장할 변수를 활당한다.
var markobj = new Array();



//위에서 처럼 지도에 캠핑장 텐트 아이콘을 찍는 함수.
function createMarker(map, n) {

//아이콘으로 사용할 이미지는 미리 준비하세요.
//여기서는 campIcon.png 라는 이름으로 이미지를 만들었습니다.
//이미지가 있는 곳의 경로와 함께 icon 변수에 활당 하세요.

var icon = "/images/campIcon.png";


    //미리 생성한 위도, 경도값을 이용하여 마커의 표시 위치를 latLng 변수에 활당한다.
    var latLng = new google.maps.LatLng(latarray[n], longarray[n]);


   //위에서 생성한 변수에 각 마커의 정보를 저장한다.
    markobj[n] = new google.maps.Marker({
      position: latLng,  //마커의 표시 위치를 활당한다.
      map: map,    //위에서 초기화 하여 생성한 지도를 활당 합니다.
      icon: icon    //위에서 준비한 이미지를 아이콘으로 설정 합니다.
    });


//마커를 클릭했을 때 아래와 같이 풍선도움말이 표시되게 한다.



    //마커를 클릭하면 실행되는 함수 이다.
    google.maps.event.addListener(markobj[n], 'click', function() {
     //먼저 클릭한 안내를 삭제 한다.
     infoWindow.close(map, infoOldNum);

 if(infoOldNum != n) infoOldNum = n;


     var myHtml = '<div >Hello, world</div>';


     infoWindow.setContent(myHtml);
     infoWindow.open(map, markobj[n]);
    });
  }
</script>



    <div class="page-moving" data-role="footer">

        <h4>Page Footer</h4>

    </div><!-- /footer -->

</div><!-- /page -->

<div data-role="page" id="page3">

    <div class="page-moving" data-role="header">
        <h1>3번</h1>
    </div><!-- /header -->

    <div role="main" class="ui-content page-moving">

        <p>I'm first in the source order so I'm shown as the page.</p>

        <p>View internal page called bar</a></p>

    </div><!-- /content -->



    <div class="page-moving" data-role="footer">

        <h4>Page Footer</h4>

    </div><!-- /footer -->

</div><!-- /page -->

<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyAl1J4EuXhHYAnBKBb-VnYco2nIZdx5V7k&sensor=true"></script>

</body>
</html>


